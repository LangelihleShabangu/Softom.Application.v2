@model Softom.Application.Models.MV.MemberDetails

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700">
<link rel="stylesheet" href="@Url.Content("~/Newassets/plugins/global/plugins.bundle.css")">
<link rel="stylesheet" href="@Url.Content("~/Newassets/plugins/custom/datatables/datatables.bundle.css")">

<script src="@Url.Content("https://code.jquery.com/jquery-3.3.1.js")"></script>
<script src="@Url.Content("https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js")"></script>
<script src="@Url.Content("~/Newassets/js/pages/components/datatables/data-sources/html.js")"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

<link rel="stylesheet" href="@Url.Content("~/assets/css/ztyle.bundle.css")" />

<div class="card-body">
    <!--Begin::App-->
    <div class="kt-grid kt-grid--desktop kt-grid--ver kt-grid--ver-desktop kt-app">

        <!--Begin:: App Aside Mobile Toggle-->
        <button class="kt-app__aside-close" id="kt_profile_aside_close">
            <i class="la la-close"></i>
        </button>

        <!--End:: App Aside Mobile Toggle-->
        <!--Begin:: App Aside-->
        <div class="kt-grid__item kt-app__toggle kt-app__aside kt-app__aside--sm kt-app__aside--fit" id="kt_profile_aside">

            <!--Begin:: Portlet-->
            <div class="kt-portlet">
                <div class="kt-portlet__body">
                    <div class="kt-widget kt-widget--general-1">
                        <div class="kt-widget__wrapper">
                            <div class="kt-widget__label">
                                <a href="#" class="kt-widget__title">
                                    @Model.ContactInformation.Firstname @Model.ContactInformation.Surname

                                </a>
                                <span class="kt-widget__desc">
                                    @Model.Association.AssociationName
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="kt-portlet__separator"></div>
                <div class="kt-portlet__body">
                    <ul class="kt-nav kt-nav--bolder kt-nav--fit-ver kt-nav--v4" role="tablist">
                        <li class="kt-nav__item">
                            <a class="kt-nav__link " href="@Url.Action("GetMemberDetailsById", "Member", new { MemberId = @Model.Member.MemberId })" role="tab">
                                <span class="kt-nav__link-icon"><i class="flaticon2-user"></i></span>
                                <span class="kt-nav__link-text">Personal Information</span>
                            </a>
                        </li>
                        <li class="kt-nav__item  ">
                            <a class="kt-nav__link" href="@Url.Action("GetPaymentDetailsById", "Member", new { MemberId = @Model.Member.MemberId })" role="tab">
                                <span class="kt-nav__link-icon"><i class="flaticon-feed"></i></span>
                                <span class="kt-nav__link-text">Payment Information</span>
                            </a>
                        </li>
                        <li class="kt-nav__item  active">
                            <a class="kt-nav__link" href="@Url.Action("GetVehicleDetailsById", "Member", new { MemberId = @Model.Member.MemberId })" role="tab">
                                <span class="kt-nav__link-icon"><i class="flaticon2-settings"></i></span>
                                <span class="kt-nav__link-text">Vehicle Information</span>
                            </a>
                        </li>
                        <li class="kt-nav__item  ">
                            <a class="kt-nav__link" href="@Url.Action("MemberSummary", "Member", new { MemberId = @Model.Member.MemberId })" role="tab">
                                <span class="kt-nav__link-icon"><i class="flaticon2-chart2"></i></span>
                                <span class="kt-nav__link-text">Payments Summary</span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="kt-portlet__separator"></div>
            </div>

            <!--End:: Portlet-->
            <!--Begin:: Portlet-->
            <div class="kt-portlet kt-portlet--head-noborder">
                <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title  kt-font-danger">
                            Important Update
                        </h3>
                    </div>
                </div>
                <div class="kt-portlet__body kt-portlet__body--fit-top">
                    <div class="kt-section kt-section--space-sm" style="align-content:center">
                        Government imposed lockdowns have also not been kind to the motor industry, adversely affecting material aspects such as the ability to offer car services and the availability of vehicle parts.
                    </div>
                </div>
            </div>
            <!--End:: Portlet-->
        </div>

        <!--End:: App Aside-->
        <!--Begin:: App Content-->
        <div class="kt-grid__item kt-grid__item--fluid kt-app__content">
            <div class="kt-portlet">
                <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                        <h3 class="kt-portlet__head-title">Member Vehicles Information </h3>
                    </div>
                    <div class="kt-portlet__head-toolbar">
                        <div class="kt-portlet__head-wrapper">
                            <div class="dropdown dropdown-inline">                               
                                <a data-bs-toggle="modal" data-bs-target='#vehicleModal-@(Model.Member.MemberId)' class="btn btn-label-brand btn-sm btn-icon btn-icon-md">
                                    <i class="fa fa-car fa-lg"></i>
                                </a>                                
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="kt-portlet kt-portlet--mobile">
                        <div class="kt-portlet__body" style="border:thin">
                            <table id="example" class="table table-striped- table-bordered table-hover table-checkable" style="width: 100%">
                                <thead>
                                    <tr>
                                        <th>Status</th>
                                        <th>Make</th>                                        
                                        <th>Model</th>
                                        <th>Registration Number</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in @Model.VehicleList)
                                    {
                                        <tr>
                                            <td style="vertical-align: middle">@item.Status.Name</td>
                                            <td style="vertical-align: middle">@item.Make</td>                                            
                                            <td style="vertical-align: middle">@item.Model</td>
                                            <td style="vertical-align: middle">@item.VINNumber</td>
                                            <td style="vertical-align: middle">
                                                <div class="flex-shrink-0">
                                                    <a href="@Url.Action("Upsert", "Vehicle", new { VehicleId = item.VehicleId })" class="btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1">
                                                        <i class="fa fa-toggle-off fa-lg"></i>
                                                    </a>                                                 
                                                    <a href="@Url.Action("Delete", "Vehicle", new { VehicleId = item.VehicleId })" class="btn btn-icon btn-active-color-primary btn-sm me-1">
                                                        <i class="fa fa-trash fa-lg"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--End:: App Content-->
    </div>
</div>

<div class="modal fade" id="vehicleModal-@(Model.Member.MemberId)" tabindex="-1" aria-labelledby="vehicleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" style="border: 1px solid #aaa; border-radius:7px;">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-3 text-success" id="vehicleModalLabel">Vehicle Details</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body m-0">
                <form method="post" class="row" asp-controller="Member" asp-action="CreateMemberVehicle">

                    <input asp-for="@Model.Member.MemberId" name="MemberId" hidden />

                    <div class="modal-body py-10 px-lg-17">
                        <!--begin::Scroll-->
                        <div class="scroll-y me-n7 pe-7" id="kt_modal_add_Vehicle_scroll" data-kt-scroll="true" data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll-max-height="auto" data-kt-scroll-dependencies="#kt_modal_add_Vehicle_header" data-kt-scroll-wrappers="#kt_modal_add_Vehicle_scroll" data-kt-scroll-offset="300px">

                            <!--begin::Input group-->
                            <div class="form-group row">
                                <label for="example-text-input" class="ms-2">Registration Number</label>
                                <div class="col-12">
                                    <input asp-for="@Model.Vehicle.Registration" class="form-control" id="Registration" />
                                </div>
                            </div>
                            <!--begin::Input group-->
                            <div class="form-group row">
                                <label for="example-text-input" class="ms-2">Make</label>
                                <div class="col-12">
                                    <input asp-for="@Model.Vehicle.Make" class="form-control" id="Make" />
                                </div>
                            </div>
                            <!--begin::Input group-->
                            <div class="form-group row">
                                <label for="example-text-input" class="ms-2">Model</label>
                                <div class="col-12">
                                    <input asp-for="@Model.Vehicle.Model" class="form-control" id="Model" />
                                </div>
                            </div>
                            <!--begin::Input group-->
                            <div class="form-group row">
                                <label for="example-text-input" class="ms-2">VIN Number</label>
                                <div class="col-12">
                                    <input asp-for="@Model.Vehicle.VINNumber" class="form-control" id="VINNumber" />
                                </div>
                            </div>

                        </div>
                        <!--end::Scroll-->
                    </div>
                    <!--end::Modal body -->

                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary btn-sm btn-hover-rise me-5 my-2">Submit</button>
                        <button type="button" class="btn btn-danger btn-sm btn-hover-rise me-5 my-2" data-bs-dismiss="modal">Close</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(document).ready(function () {
            $('#example').DataTable({
                "scrollX": true,
                "scrollY": true
            });
        });
    </script>
}



